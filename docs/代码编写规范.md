# V1-Team 代码编写规范

## 写在前面

&emsp;&emsp;本文规定了本小组在开发过程中的PHP代码规范。本规范仍有不完善之处，望团队成员提出建议。

|版本|说明|
|:-:|:-:|
|V-1.0|确定初版代码规范，规定了php与javascript的编写规范|

* ***在未经过小组讨论的情况下禁止修改此文档 !!!***

## 基本编程规范

* 以下控制结构中的所有结构体的‘{’和‘}’**都不能省略**，即使块结构中只有一条语句。
* 所有关键字和分号后都应有一个空格；二元运算符与操作数之间各有一空格；函数名与括号间无空格。
* 所有结构体的大括号都**独占一行**。
* 条件语句嵌套**不可超过两层**。
* ‘if’、‘while’等语句的条件过长，建议按照逻辑关系折行。
* 复杂表达式**使用括号**表示其优先级。
* 同一块内的变量声明应集中在块的**开始位置**，并且定义结束后**保留一个空行**。

***

## 控制结构规范示例

* 条件语句

```javascript
if (条件)               // 关键字‘if’与左括号间有一空格
{                       // 块结构换行
  
}
else if (条件)          // 关键字‘else if’与左括号有一空格，换行；php不使用‘elseif’关键字
{                       // 块结构换行
  
}
else                    // 换行
{                       // 块结构换行
  
}
```

* 循环语句

```javascript
while (条件)            // 关键字‘while’与左括号间有一空格
{                       // 块结构换行
  
}
  
do
{                       // 块结构换行
  
} while (条件);         // 不换行，关键字‘while’与左括号间有一空格

for (i = 0; i < 10; i++) // 关键字‘for’与左括号间有一空格，
{                        // 换行

}


```

* 分支语句

```javascript
switch (变量)
{               // 换行
case 0:         // 不缩进
    break;      // 缩进
case 1:
case 2:
case 3:
case 4:
    return;
default:
    break;
}               // 换行
```

* 异常处理语句

```javascript
try
{               // 换行
  
}
catch (异常1)   // 换行
{               // 换行
  
}
catch (异常2)   // 换行
{               // 换行
  
}
finally         // 换行
{               // 换行
  
}
```

***

## 命名规范

* 全局变量：
  * 以**‘g_’** 开头，后接变量名称，变量名称增加三字节类型前缀（见下面），并使用**使用驼峰命名法**，如：

    ```javascript
    var g_intSumUser;              // javascript
    var $g_intSumProject;          // php
    ```

* 常量：
  * **使用大写字符**，单词间使用**‘_’**分隔，如：

    ```javascript
    const MAX_INDEX = 10;
    ```

  * 对于php，常量建议使用**define语句**定义，如：

    ```php
    define("MAX_INDEX", 10);
    ```

* 关键字‘ture’、‘false’、‘null’使用**小写字符**。
* 类的method命名采用**驼峰命名法**，普通function命名采用**过程函数风格命名**，如：

```php
public function getName()
{
  
}
  
function get_name()
{
  
}
```

* 类成员变量和局部变量采用**驼峰命名法**，增加三字节类型前缀（见下面），如：

```javascript
var strName = 'name';
var intSumUser = 10;
```

* 函数传入参数**以‘_’作为开头**，使用**驼峰命名法**，如：

```javascript
function set(_para)         // php使用 $_para
{
  
}
```

* 文件命名使用**小写字母**，使用**‘_’连接**，如：

```
show_lemma.php
```

* 类名以大写字母开头，每个单词首字母大写，如：

```javascript
class User
```

* 类型前缀：
  * arr：数组类型
  * str：字符串
  * int：整型
  * bol：布尔型
  * obj：对象
  * 其他未定

***

## 注释规范

* 注释使用**中文**。
* 注释的目的在于让小组其他成员了解相应部分的**功能与使用规格**。
* **文件、函数、类**应有相应的注释。
* 文件注释建议包含：
  * 文件作用；
  * 若有namespace规格，说明之；
  * 文件作者信息；
  * 如：

    ```php
    /**
     * 错误处理模块。
     * @package Error
     * @author Cookize
    ```
* 类注释建议包含：
  * 类的主要作用；
  * 所有成员变量的**类型及含义**；
  * 所有方法的作用和规格（所有参数类型与含义、返回值类型与含义）；
  * 如：

    ```php
    /**
     * 用户类
     */
    class User
    {
        /**
         * 用户名
         * @var string
         */
        private $strUserName = 'name';

        /**
         * 获取用户名
         * @return string 用户名
         */
        public get_name()
        {
            return $strUserName;
        }

        /**
         * 设置用户名
         * @param string 用户名
         */
        public set_name($_name)
        {
  
        }
    }
    ```

* **关键代码**应有注释说明。

***

## 其他建议

* 对传入参数和返回值进行类型检查和显示转换，使其符合注释中的规格。
* 对于**函数返回值的判断使用‘===’ 和‘ !\==’**，尤其是布尔类型。
* 所有能省略括号的地方都**不应将括号省略**。
* 文件路径应使用框架提供的宏**写成绝对路径**。（在使用框架时）
* 一般情况下，使用‘**include_once**’和‘**require_once**’，而不是 ~~‘include’~~ 和 ~~‘require’~~。
* 字符串使用**单引号**引用。
* 使用‘**&&**’和‘**||**’，而不使用‘~~and~~’和‘~~or~~’。
* 所有的命名应**有意义**。
* 进行‘==’判断时，常量应在左边。

    ```php
    if (1 == $a)                // 正确
    if ($b == $a)               // 正确
    if ($a == 1)                // 错误
    ```

***